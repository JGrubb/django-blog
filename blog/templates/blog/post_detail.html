{% extends 'base.html' %}
{% load markdownify %}

{% block content %}
    <section class="post">
        <header class="post-header">
            <h2 class="post-title">{{ post.title }}</h2>
            <time>{{ post.pub_date }}</time>
            in {% for tag in post.tags.all %}
            <a href="{% url "tags" tag.slug %}" class="post-category post-category-{{ tag.id }}">{{ tag.name }}</a>
        {% endfor %}
        </header>

        <div class="post-description">
            {{ post.body | markdown | safe }}
            {% if post.previous %}
                <a class="pure-button" href="{% url "blog:detail" post.previous.id post.previous.slug %}">previous: {{ post.previous.title }}</a>
            {% endif %}
            {% with next_post=post.previous_post.get %}
                {% if next_post %}
                <a class="pure-button" href="{% url "blog:detail" next_post.id next_post.slug%}">next: {{ next_post.title }}</a>
                {% endif %}
            {% endwith %}
            <div id="disqus_thread"></div>
            <script>
                (function () { // DON'T EDIT BELOW THIS LINE
                    var d = document, s = d.createElement('script');
                    s.src = '//ignoredbydinosaurs.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments
                powered by Disqus.</a></noscript>
        </div>
        {% if user.is_authenticated %}
            <div class="edit-link">
                <a class="pure-button pure-button-primary" href="{% url "admin:blog_post_change" post.id %}">Edit</a>
            </div>
        {% endif %}
    </section>

{% endblock %}